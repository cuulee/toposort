!function(a,b){if("function"==typeof define&&define.amd)define(["exports","module"],b);else if("undefined"!=typeof exports&&"undefined"!=typeof module)b(exports,module);else{var c={exports:{}};b(c.exports,c),a.toposort=c.exports}}(this,function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(){function a(){c(this,a),this.edges=[],this.Toposort=a}return a.prototype.add=function(a,b){if("string"!=typeof a||!a)throw new TypeError("Dependent name must be given as a not empty string");if(b=Array.isArray(b)?b:[b],b.length>0)for(var c=b,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;if("string"!=typeof g||!g)throw new TypeError("Dependency name must be given as a not empty string");this.edges.push([a,g])}else this.edges.push([a]);return this},a.prototype.sort=function(){for(var a=this,b=[],c=0,d=0,e=this.edges,f=Array.isArray(e),g=0,e=f?e:e[Symbol.iterator]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{if(g=e.next(),g.done)break;h=g.value}for(var i=h,j=i,k=Array.isArray(j),l=0,j=k?j:j[Symbol.iterator]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{if(l=j.next(),l.done)break;m=l.value}var n=m;-1===b.indexOf(n)&&b.push(n)}}for(var o=new Array(b.length),p=function r(e,f){var g=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],h=void 0,i=void 0;if(g.indexOf(e)>-1)throw new Error("Cyclic dependency found. "+e+" is dependent of itself.\nDependency chain: "+g.join(" -> ")+" => "+e);if(h=b.indexOf(e),-1===h||c>h)return f;0===h?c++:b.splice(h,1),0===g.length&&f--;for(var j=a.edges,k=Array.isArray(j),l=0,j=k?j:j[Symbol.iterator]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{if(l=j.next(),l.done)break;m=l.value}var n=m;n[0]===e&&(i=i||g.concat([e]),f=r(n[1],f,i))}return o[o.length-++d]=e,f},q=0;q<b.length-c;q++)q=p(b[q+c],q);return o},a.prototype.clear=function(){return this.edges=[],this},a}();b.exports=d});